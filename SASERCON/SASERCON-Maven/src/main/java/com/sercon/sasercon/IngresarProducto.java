/*
 * To change this license header, choose License Headers in Project Properties.
 * To change this template file, choose Tools | Templates
 * and open the template in the editor.
 */
package com.sercon.sasercon;

import javax.swing.*;
import javax.swing.filechooser.FileNameExtensionFilter;
import java.awt.*;
import java.io.*;
import java.net.HttpURLConnection;
import java.net.URL;
import java.nio.charset.StandardCharsets;
import java.util.logging.Level;
import java.util.logging.Logger;

/**
 *
 * @author coner
 */
public class IngresarProducto extends javax.swing.JInternalFrame {
    
public String IPNombre, IPPrecio, IPDescripcion, IPModelo, IPUmbral, IPEntrantes;
public String IPInventario, IPEstrado, IPAnaquel, IPNivel, IPSeccion;
public String IPMarca, IPClasificacion, IPCodigoFabricante, IPCategoria, IPFamilia;
public String IPFoto = "", IPFecha;
public Boolean hasPhoto = false;

protected File IPf;
protected FileInputStream IPfoto = null;
protected Image IPfi = null;

static Comprobacion TOOLS = new Comprobacion();

static FileNameExtensionFilter filter = new FileNameExtensionFilter("Image Files", "jpg", "png", "gif", "jpeg");

    /**
     * Creates new form IngresarProducto
     */
    public IngresarProducto() {
        initComponents();
    }

    /**
     * This method is called from within the constructor to initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is always
     * regenerated by the Form Editor.
     */
    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">//GEN-BEGIN:initComponents
    private void initComponents() {

        jScrollPane1 = new javax.swing.JScrollPane();
        jPanel2 = new javax.swing.JPanel();
        lblIPNombreProducto = new javax.swing.JLabel();
        jLabel30 = new javax.swing.JLabel();
        lblIPModelo = new javax.swing.JLabel();
        lblIPFamilia = new javax.swing.JLabel();
        lblIPMarca = new javax.swing.JLabel();
        lblIPFabricante = new javax.swing.JLabel();
        jScrollPane5 = new javax.swing.JScrollPane();
        txaIPDescripcionProducto = new javax.swing.JTextArea();
        lblIPEntrantes = new javax.swing.JLabel();
        cboxIPCategoría = new javax.swing.JComboBox<>();
        lblIPUmbral = new javax.swing.JLabel();
        btnIPCancelar = new javax.swing.JButton();
        btnIPGuardar = new javax.swing.JButton();
        txtIPNombreProducto = new javax.swing.JTextField();
        txtIPModelo = new javax.swing.JTextField();
        txtIPCantidadEntrante = new javax.swing.JTextField();
        txtIPUmbral = new javax.swing.JTextField();
        lblInventario = new javax.swing.JLabel();
        txtIPCantidadInventario = new javax.swing.JTextField();
        lblIPEstrado = new javax.swing.JLabel();
        lblIPAnaquel = new javax.swing.JLabel();
        txtIPEstrado = new javax.swing.JTextField();
        txtIPAnaquel = new javax.swing.JTextField();
        lblIPSeccion = new javax.swing.JLabel();
        lvlIPNivel = new javax.swing.JLabel();
        txtIPNivel = new javax.swing.JTextField();
        txtIPSeccion = new javax.swing.JTextField();
        jSeparator1 = new javax.swing.JSeparator();
        btnIPImagen = new javax.swing.JButton();
        lblIPDatosGenerales = new javax.swing.JLabel();
        jLabel46 = new javax.swing.JLabel();
        lblIPClasificacion = new javax.swing.JLabel();
        cboxIPFamilia = new javax.swing.JComboBox<>();
        cboxIPMarca = new javax.swing.JComboBox<>();
        cboxIPClasificacion = new javax.swing.JComboBox<>();
        cboxIPCodigoFabricante = new javax.swing.JComboBox<>();
        lblIPPrecio = new javax.swing.JLabel();
        txtIPPrecio = new javax.swing.JTextField();
        lblIPCategoria = new javax.swing.JLabel();

        setClosable(true);
        setIconifiable(true);
        setMaximizable(true);
        setResizable(true);
        setTitle("Nuevo Producto");

        jPanel2.setBorder(javax.swing.BorderFactory.createTitledBorder(javax.swing.BorderFactory.createLineBorder(new java.awt.Color(41, 43, 45)), "Ingresar Producto", javax.swing.border.TitledBorder.DEFAULT_JUSTIFICATION, javax.swing.border.TitledBorder.DEFAULT_POSITION, new java.awt.Font("Arial", 0, 11))); // NOI18N

        lblIPNombreProducto.setText("Nombre del producto:");

        jLabel30.setText("Descripción:");

        lblIPModelo.setText("Modelo:");

        lblIPFamilia.setText("Familia:");

        lblIPMarca.setText("Marca:");

        lblIPFabricante.setText("Código del fabricante:");

        txaIPDescripcionProducto.setColumns(20);
        txaIPDescripcionProducto.setRows(5);
        jScrollPane5.setViewportView(txaIPDescripcionProducto);

        lblIPEntrantes.setText("Cantidad de productos entrantes:");

        cboxIPCategoría.setModel(new javax.swing.DefaultComboBoxModel<>(new String[] { "Seleccione uno:", "Ubicación de la maquina", "Nivel de aceite", "Freno de la maquina o motor"})); //, "Rieles", "Funcionamiento del control", "Regulador final de parada", "Señalización", "Operador de puertas", "Seguridades", "Funcionamiento de puertas de cabina"

        lblIPUmbral.setText("Umbral de abastecimiento:");

        btnIPCancelar.setText("Cancelar");
        btnIPCancelar.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnIPCancelarActionPerformed(evt);
            }
        });

        btnIPGuardar.setText("Guardar");
        btnIPGuardar.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnIPGuardarActionPerformed();
            }
        });

        lblInventario.setText("Cantidad de productos en inventario:");

        lblIPEstrado.setText("Estrado:");

        lblIPAnaquel.setText("Anaquel:");

        lblIPSeccion.setText("Sección:");

        lvlIPNivel.setText("Nivel:");

        btnIPImagen.setIcon(new javax.swing.ImageIcon(getClass().getResource("/img/MódulosAcceso/Módulos/add_photo.png"))); // NOI18N
        btnIPImagen.setText("Producto");
        btnIPImagen.setHorizontalTextPosition(javax.swing.SwingConstants.CENTER);
        btnIPImagen.setVerticalAlignment(javax.swing.SwingConstants.BOTTOM);
        btnIPImagen.setVerticalTextPosition(javax.swing.SwingConstants.BOTTOM);
        btnIPImagen.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnIPImagenActionPerformed();
            }
        });

        lblIPDatosGenerales.setFont(new java.awt.Font("Tahoma", 1, 12)); // NOI18N
        lblIPDatosGenerales.setText("Datos generales");

        jLabel46.setFont(new java.awt.Font("Tahoma", 1, 12)); // NOI18N
        jLabel46.setText("Localización en almacén");

        lblIPClasificacion.setText("Clasificación:");

        cboxIPFamilia.setModel(new javax.swing.DefaultComboBoxModel<>(new String[] { "Seleccione uno:", "Cables", "Tornillos", "Imanes", "Pistones", "Frenos", "Botoneras", "Puertas", "Tarjetas digitales", "Sensores" }));

        cboxIPMarca.setModel(new javax.swing.DefaultComboBoxModel<>(new String[] { "Seleccione uno:", "Tetraflon", "Jogar", "Iesa", "Transbelt", "Schindler" }));

        cboxIPClasificacion.setModel(new javax.swing.DefaultComboBoxModel<>(new String[] { "Seleccione uno:", "Refacción", "Herramienta" }));

        cboxIPCodigoFabricante.setModel(new javax.swing.DefaultComboBoxModel<>(new String[] { "Seleccione uno:", "Otis", "Schindler" }));

        lblIPPrecio.setText("Precio:    $");

        lblIPCategoria.setText("Categoría:");

        javax.swing.GroupLayout jPanel2Layout = new javax.swing.GroupLayout(jPanel2);
        jPanel2.setLayout(jPanel2Layout);
        jPanel2Layout.setHorizontalGroup(
            jPanel2Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(jPanel2Layout.createSequentialGroup()
                .addGroup(jPanel2Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addGroup(jPanel2Layout.createSequentialGroup()
                        .addGap(6, 6, 6)
                        .addGroup(jPanel2Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                            .addGroup(jPanel2Layout.createSequentialGroup()
                                .addComponent(lblIPNombreProducto)
                                .addGap(18, 18, 18)
                                .addComponent(txtIPNombreProducto, javax.swing.GroupLayout.PREFERRED_SIZE, 210, javax.swing.GroupLayout.PREFERRED_SIZE)
                                .addGap(54, 54, 54)
                                .addComponent(lblIPPrecio)
                                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                                .addComponent(txtIPPrecio, javax.swing.GroupLayout.PREFERRED_SIZE, 81, javax.swing.GroupLayout.PREFERRED_SIZE))
                            .addGroup(jPanel2Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING, false)
                                .addComponent(jScrollPane5, javax.swing.GroupLayout.PREFERRED_SIZE, 545, javax.swing.GroupLayout.PREFERRED_SIZE)
                                .addGroup(jPanel2Layout.createSequentialGroup()
                                    .addGap(6, 6, 6)
                                    .addComponent(lblIPModelo)
                                    .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                                    .addComponent(txtIPModelo, javax.swing.GroupLayout.PREFERRED_SIZE, 105, javax.swing.GroupLayout.PREFERRED_SIZE)
                                    .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                                    .addComponent(lblIPMarca)
                                    .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                                    .addComponent(cboxIPMarca, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                                    .addGap(18, 18, Short.MAX_VALUE)
                                    .addComponent(lblIPClasificacion)
                                    .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                                    .addComponent(cboxIPClasificacion, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)))
                            .addGroup(jPanel2Layout.createSequentialGroup()
                                .addGroup(jPanel2Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING)
                                    .addGroup(jPanel2Layout.createSequentialGroup()
                                        .addGroup(jPanel2Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING)
                                            .addComponent(lblIPEntrantes)
                                            .addComponent(lblInventario))
                                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                                        .addGroup(jPanel2Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING, false)
                                            .addComponent(txtIPCantidadEntrante, javax.swing.GroupLayout.DEFAULT_SIZE, 60, Short.MAX_VALUE)
                                            .addComponent(txtIPCantidadInventario)))
                                    .addGroup(jPanel2Layout.createSequentialGroup()
                                        .addComponent(lblIPUmbral)
                                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                                        .addComponent(txtIPUmbral, javax.swing.GroupLayout.PREFERRED_SIZE, 60, javax.swing.GroupLayout.PREFERRED_SIZE)))
                                .addGap(18, 18, 18)
                                .addGroup(jPanel2Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING, false)
                                    .addGroup(jPanel2Layout.createSequentialGroup()
                                        .addComponent(lblIPFabricante)
                                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                                        .addComponent(cboxIPCodigoFabricante, 0, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
                                    .addGroup(jPanel2Layout.createSequentialGroup()
                                        .addComponent(lblIPFamilia)
                                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                                        .addComponent(cboxIPFamilia, 0, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
                                    .addGroup(jPanel2Layout.createSequentialGroup()
                                        .addComponent(lblIPCategoria)
                                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                                        .addComponent(cboxIPCategoría, javax.swing.GroupLayout.PREFERRED_SIZE, 197, javax.swing.GroupLayout.PREFERRED_SIZE)))))
                        .addGap(0, 0, Short.MAX_VALUE))
                    .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, jPanel2Layout.createSequentialGroup()
                        .addGap(0, 0, Short.MAX_VALUE)
                        .addComponent(btnIPCancelar, javax.swing.GroupLayout.PREFERRED_SIZE, 95, javax.swing.GroupLayout.PREFERRED_SIZE)
                        .addGap(25, 25, 25)
                        .addComponent(btnIPGuardar, javax.swing.GroupLayout.PREFERRED_SIZE, 95, javax.swing.GroupLayout.PREFERRED_SIZE)))
                .addContainerGap())
            .addGroup(jPanel2Layout.createSequentialGroup()
                .addContainerGap()
                .addGroup(jPanel2Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addGroup(jPanel2Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.CENTER)
                        .addComponent(jSeparator1, javax.swing.GroupLayout.PREFERRED_SIZE, 544, javax.swing.GroupLayout.PREFERRED_SIZE)
                        .addComponent(btnIPImagen)
                        .addComponent(jLabel46)
                        .addComponent(lblIPDatosGenerales)
                        .addGroup(jPanel2Layout.createSequentialGroup()
                            .addComponent(lblIPEstrado)
                            .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                            .addComponent(txtIPEstrado, javax.swing.GroupLayout.PREFERRED_SIZE, 40, javax.swing.GroupLayout.PREFERRED_SIZE)
                            .addGap(18, 18, 18)
                            .addComponent(lblIPAnaquel)
                            .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                            .addComponent(txtIPAnaquel, javax.swing.GroupLayout.PREFERRED_SIZE, 42, javax.swing.GroupLayout.PREFERRED_SIZE)
                            .addGap(18, 18, 18)
                            .addComponent(lvlIPNivel)
                            .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                            .addComponent(txtIPNivel, javax.swing.GroupLayout.PREFERRED_SIZE, 50, javax.swing.GroupLayout.PREFERRED_SIZE)
                            .addGap(18, 18, 18)
                            .addComponent(lblIPSeccion)
                            .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                            .addComponent(txtIPSeccion, javax.swing.GroupLayout.PREFERRED_SIZE, 50, javax.swing.GroupLayout.PREFERRED_SIZE)))
                    .addComponent(jLabel30))
                .addGap(0, 0, Short.MAX_VALUE))
        );
        jPanel2Layout.setVerticalGroup(
            jPanel2Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(jPanel2Layout.createSequentialGroup()
                .addComponent(lblIPDatosGenerales)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addGroup(jPanel2Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING, false)
                    .addGroup(jPanel2Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                        .addComponent(txtIPNombreProducto)
                        .addComponent(lblIPPrecio, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                        .addComponent(txtIPPrecio, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                    .addComponent(lblIPNombreProducto, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
                .addGap(7, 7, 7)
                .addComponent(jLabel30)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addComponent(jScrollPane5, javax.swing.GroupLayout.PREFERRED_SIZE, 38, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addGroup(jPanel2Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE, false)
                    .addComponent(lblIPMarca, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                    .addComponent(cboxIPMarca)
                    .addComponent(lblIPModelo)
                    .addComponent(txtIPModelo, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(lblIPClasificacion, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                    .addComponent(cboxIPClasificacion, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addGroup(jPanel2Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(lblIPFabricante)
                    .addComponent(cboxIPCodigoFabricante, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(txtIPUmbral, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(lblIPUmbral, javax.swing.GroupLayout.PREFERRED_SIZE, 20, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addGroup(jPanel2Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE, false)
                    .addComponent(txtIPCantidadEntrante, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(lblIPCategoria)
                    .addComponent(lblIPEntrantes, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                    .addComponent(cboxIPCategoría, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addGroup(jPanel2Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(lblInventario, javax.swing.GroupLayout.PREFERRED_SIZE, 20, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(txtIPCantidadInventario, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(cboxIPFamilia)
                    .addComponent(lblIPFamilia))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addComponent(btnIPImagen)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                .addComponent(jSeparator1, javax.swing.GroupLayout.PREFERRED_SIZE, 2, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addComponent(jLabel46)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addGroup(jPanel2Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addGroup(jPanel2Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                        .addComponent(txtIPEstrado, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                        .addComponent(lblIPEstrado))
                    .addGroup(jPanel2Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                        .addComponent(txtIPAnaquel, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                        .addComponent(lblIPAnaquel))
                    .addGroup(jPanel2Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                        .addComponent(txtIPNivel, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                        .addComponent(lvlIPNivel)
                        .addComponent(txtIPSeccion, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                        .addComponent(lblIPSeccion)))
                .addGap(10, 10, 10)
                .addGroup(jPanel2Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addComponent(btnIPCancelar)
                    .addComponent(btnIPGuardar))
                .addContainerGap())
        );

        jScrollPane1.setViewportView(jPanel2);

        javax.swing.GroupLayout layout = new javax.swing.GroupLayout(getContentPane());
        getContentPane().setLayout(layout);
        layout.setHorizontalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, layout.createSequentialGroup()
                .addGap(0, 0, Short.MAX_VALUE)
                .addComponent(jScrollPane1, javax.swing.GroupLayout.PREFERRED_SIZE, 570, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addGap(0, 0, Short.MAX_VALUE))
        );
        layout.setVerticalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(layout.createSequentialGroup()
                .addComponent(jScrollPane1)
                .addContainerGap())
        );

        pack();
    }// </editor-fold>//GEN-END:initComponents

    private void btnIPImagenActionPerformed() {//GEN-FIRST:event_btnIPImagenActionPerformed
        JFileChooser chooser = new JFileChooser();
        chooser.setFileFilter(filter);
        chooser.showOpenDialog(null);
        IPf = chooser.getSelectedFile();
        try {
            IPfoto = new FileInputStream(IPf);
            IPfi=Toolkit.getDefaultToolkit().createImage(IPf.getAbsolutePath());
            IPfi=IPfi.getScaledInstance(144, 144, 1);
            btnIPImagen.setIcon(new ImageIcon(IPfi));
            hasPhoto = true;
        } catch (FileNotFoundException ex) {
            Logger.getLogger(IngresarProducto.class.getName()).log(Level.SEVERE, null, ex);
        }
    }//GEN-LAST:event_btnIPImagenActionPerformed

    private void btnIPGuardarActionPerformed() {//GEN-FIRST:event_btnIPGuardarActionPerformed
        saveProduct();
    }//GEN-LAST:event_btnIPGuardarActionPerformed

    private void saveProduct()  {

        //Captura de datos del .form a variables
        IPNombre = this.txtIPNombreProducto.getText().trim();
        IPPrecio = this.txtIPPrecio.getText().trim();
        IPDescripcion = this.txaIPDescripcionProducto.getText().trim();
        IPModelo = this.txtIPModelo.getText().trim();
        IPUmbral = this.txtIPUmbral.getText().trim();
        IPEntrantes = this.txtIPCantidadEntrante.getText();
        IPInventario = this.txtIPCantidadInventario.getText().trim();
        IPEstrado = this.txtIPEstrado.getText().trim();
        IPAnaquel = this.txtIPAnaquel.getText().trim();
        IPNivel = this.txtIPNivel.getText().trim();
        IPSeccion = this.txtIPSeccion.getText().trim();

        IPMarca = Integer.toString(this.cboxIPMarca.getSelectedIndex());
        IPClasificacion = Integer.toString(this.cboxIPClasificacion.getSelectedIndex());
        IPCodigoFabricante = Integer.toString(this.cboxIPCodigoFabricante.getSelectedIndex());
        IPCategoria = Integer.toString(this.cboxIPCategoría.getSelectedIndex());
        IPFamilia = Integer.toString(this.cboxIPFamilia.getSelectedIndex());

        IPFecha = java.time.LocalDate.now().toString();

        if(hasPhoto = true) {
            IPFoto = TOOLS.encodeFileToBase64Binary(IPf);
        }

        // Generación del cuerpo en JSON
        String jsonInputString = "{ \"nombre\": \""+IPNombre+"\", \"icono\": \""+IPFoto+"\", \"descripcionProducto\": \""+IPDescripcion
                +"\", \"modelo\": \""+IPModelo+"\", \"familia\": \""+IPFamilia+"\", \"marca\": \""+IPMarca+"\", \"codigoFabricante\": \""+IPCodigoFabricante
                +"\", \"numeroProductosEntrantes\": \""+IPEntrantes+"\", \"categoria\": \""+IPCategoria+"\", \"stock\": \""+IPInventario
                +"\", \"fechaAltaProducto\": \""+IPFecha+"\", \"precio\": \""+IPPrecio+"\", \"umbralInventario\": \""+IPUmbral
                +"\", \"clasificacionProducto\": \""+IPClasificacion+"\", \"estatus\": \"1\", \"estrado\": \""+IPEstrado+"\", \"anaquel\": \""+IPAnaquel
                +"\", \"nivel\": \""+IPNivel+"\", \"seccion\": \""+IPSeccion+"\" }";

        //Envío del JSON
        HttpURLConnection conn = null;
        try {
            URL url = new URL("https://9qob1rxodb.execute-api.us-west-1.amazonaws.com/api/product");

            conn = (HttpURLConnection) url.openConnection();
            conn.setRequestMethod("POST");

            conn.setRequestProperty("Content-Type", "application/json; utf-8");
            conn.setRequestProperty("Accept", "application/json");

            conn.setDoOutput(true);

            try(OutputStream os = conn.getOutputStream()) {
                byte[] input = jsonInputString.getBytes(StandardCharsets.UTF_8);
                os.write(input, 0, input.length);
            }

            int responseCode = conn.getResponseCode();

            if (responseCode != 200) {
                throw new RuntimeException("HttpResponseCode: " + responseCode);
            } else {
                try(BufferedReader br = new BufferedReader(
                        new InputStreamReader(conn.getInputStream(), StandardCharsets.UTF_8))) {
                    StringBuilder response = new StringBuilder();
                    String responseLine;
                    while ((responseLine = br.readLine()) != null) {
                        response.append(responseLine.trim());
                    }

                    if(response.toString().equals("Se agrego correctamente el registro"))    {
                        JOptionPane.showOptionDialog(this, "Se han guardado sus datos satisfactoriamente.",
                                "Respuesta exitosa", JOptionPane.YES_NO_CANCEL_OPTION,
                                JOptionPane.INFORMATION_MESSAGE, null, new Object[]{" 0K "},"0K");
                        this.dispose();
                    }
                    else    {
                        JOptionPane.showMessageDialog(null,response.toString(),"API error",2);
                    }
                }
            }
        } catch (Exception ex)   {
            JOptionPane.showMessageDialog(null,ex);
        } finally {
            if (conn != null) {
                conn.disconnect();
            }
        }

    }
    private void btnIPCancelarActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btnIPCancelarActionPerformed
        this.dispose();
    }//GEN-LAST:event_btnIPCancelarActionPerformed


    // Variables declaration - do not modify//GEN-BEGIN:variables
    private javax.swing.JButton btnIPCancelar;
    private javax.swing.JButton btnIPGuardar;
    private javax.swing.JButton btnIPImagen;
    private javax.swing.JComboBox<String> cboxIPCategoría;
    private javax.swing.JComboBox<String> cboxIPClasificacion;
    private javax.swing.JComboBox<String> cboxIPCodigoFabricante;
    private javax.swing.JComboBox<String> cboxIPFamilia;
    private javax.swing.JComboBox<String> cboxIPMarca;
    private javax.swing.JLabel jLabel30;
    private javax.swing.JLabel jLabel46;
    private javax.swing.JPanel jPanel2;
    private javax.swing.JScrollPane jScrollPane1;
    private javax.swing.JScrollPane jScrollPane5;
    private javax.swing.JSeparator jSeparator1;
    private javax.swing.JLabel lblIPAnaquel;
    private javax.swing.JLabel lblIPCategoria;
    private javax.swing.JLabel lblIPClasificacion;
    private javax.swing.JLabel lblIPDatosGenerales;
    private javax.swing.JLabel lblIPEntrantes;
    private javax.swing.JLabel lblIPEstrado;
    private javax.swing.JLabel lblIPFabricante;
    private javax.swing.JLabel lblIPFamilia;
    private javax.swing.JLabel lblIPMarca;
    private javax.swing.JLabel lblIPModelo;
    private javax.swing.JLabel lblIPNombreProducto;
    private javax.swing.JLabel lblIPPrecio;
    private javax.swing.JLabel lblIPSeccion;
    private javax.swing.JLabel lblIPUmbral;
    private javax.swing.JLabel lblInventario;
    private javax.swing.JLabel lvlIPNivel;
    private javax.swing.JTextArea txaIPDescripcionProducto;
    private javax.swing.JTextField txtIPAnaquel;
    private javax.swing.JTextField txtIPCantidadEntrante;
    private javax.swing.JTextField txtIPCantidadInventario;
    private javax.swing.JTextField txtIPEstrado;
    private javax.swing.JTextField txtIPModelo;
    private javax.swing.JTextField txtIPNivel;
    private javax.swing.JTextField txtIPNombreProducto;
    private javax.swing.JTextField txtIPPrecio;
    private javax.swing.JTextField txtIPSeccion;
    private javax.swing.JTextField txtIPUmbral;
    // End of variables declaration//GEN-END:variables
}
